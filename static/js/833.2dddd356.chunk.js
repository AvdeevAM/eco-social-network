"use strict";(self.webpackChunkeco_social_network=self.webpackChunkeco_social_network||[]).push([[833],{9625:function(e,o,s){s.d(o,{e:function(){return f}});var t=s(1413),i=s(5671),r=s(3144),n=s(136),a=s(3668),l=s(2791),c=s(6871),u=s(8687),d=s(184),p=function(e){return{isAuth:e.auth.isAuth}},f=function(e){var o=function(o){(0,n.Z)(l,o);var s=(0,a.Z)(l);function l(){return(0,i.Z)(this,l),s.apply(this,arguments)}return(0,r.Z)(l,[{key:"render",value:function(){return this.props.isAuth?(0,d.jsx)(e,(0,t.Z)({},this.props)):(0,d.jsx)(c.Fg,{to:"/login"})}}]),l}(l.Component);return(0,u.$j)(p)(o)}},4833:function(e,o,s){s.r(o),s.d(o,{default:function(){return ne}});var t=s(1413),i=s(5671),r=s(3144),n=s(136),a=s(3668),l=s(2791),c=s(8687),u=s(6508),d="MyPosts_postsBlock__v3+cd",p="MyPosts_feedTitle__Mvm3w",f="MyPosts_posts__vpq1W",h="MyPosts_newMessage__AFFuI",m="MyPosts_newMessageBg__ovFwR",_="MyPosts_error__w1FRp",x="Post_item__gptSG",j="Post_postAuthor__9ie+w",v="Post_postTextAreaWrapper__2DNp5",g="Post_postTextArea__jnOAE",b="Post_likeArea__XWopF",k="Post_likeButton__CRreo";var P=s.p+"static/media/heart.7eacb08c415e82a5f40150765ce4de78.svg",w=s(9857),N=s(2413),I=s(184),S=function(e){return(0,I.jsxs)("div",{className:x,children:[(0,I.jsxs)("div",{className:j,children:[(0,I.jsx)("img",{src:e.authorizedUserPhoto||w,alt:""}),e.fullName.split(" ")[0]||"anonymous"]}),(0,I.jsxs)("div",{className:v,children:[(0,I.jsx)("div",{className:g,children:(0,I.jsx)("span",{children:e.message})}),(0,I.jsxs)("div",{className:b,children:[(0,N.a)(k,"Like","button",{onClick:function(){e.incrementLikes(e.postId)}}),(0,I.jsxs)("span",{children:[(0,I.jsx)("img",{src:P,alt:""}),e.likesCount]})]})]})]})},F=s(5705),A=s(132),Z=s(3775),y=function(e){return(0,I.jsx)(F.J9,{onSubmit:e.addPost,initialValues:{newPostText:""},validationSchema:e.postSchema,children:function(e){var o=e.handleSubmit,s=e.isValid,t=e.dirty,i=(e.touched,e.errors);return(0,I.jsxs)(F.l0,{onSubmit:o,className:h,children:[(0,I.jsx)("div",{className:m}),(0,Z.Gr)("textarea","newPostText","write your thoughts here"),i.newPostText&&(0,I.jsx)("p",{className:_,children:i.newPostText}),(0,N.a)(null,"Add post","submit",{disabled:!(s&&t)})]})}})},D=function(e){var o=e.posts.map((function(o){return(0,I.jsx)(S,{message:o.message,likesCount:o.likesCount,postId:o.id,authorizedUserPhoto:e.authorizedUserPhoto,incrementLikes:e.incrementLikes,fullName:e.fullName},o.id)})),s=A.Ry().shape({newPostText:A.Z_().min(1,"type some text to add post").max(15,"caution: message is too long")});return(0,I.jsxs)("div",{className:d,children:[(0,I.jsx)("div",{className:p,children:(0,I.jsx)("h4",{children:"My feed"})}),(0,I.jsx)("div",{children:(0,I.jsx)(y,{addPost:function(o,s){var t=s.resetForm;e.addPost(o.newPostText),t({values:{newPostText:""}})},postSchema:s})}),(0,I.jsx)("div",{className:f,children:o})]})},B=(0,c.$j)((function(e){return{posts:e.profilePage.posts,authorizedUserPhoto:e.auth.photo,fullName:e.auth.fullName}}),{addPost:u.q2,incrementLikes:u.Jc})(D),M=s(885),T=s(8992),q={descriptionBlock:"ProfileInfo_descriptionBlock__XH+mM",descriptionBlockAvatar:"ProfileInfo_descriptionBlockAvatar__2CX8t",followers:"ProfileInfo_followers__0xMMi",descriptionBlockInfo:"ProfileInfo_descriptionBlockInfo__3+d3l",descriptionBlockStatus:"ProfileInfo_descriptionBlockStatus__whHd5",descriptionBlockAbout:"ProfileInfo_descriptionBlockAbout__kegfH",profileInfoDataButton:"ProfileInfo_profileInfoDataButton__TMR0k",contacts:"ProfileInfo_contacts__EHL5j",lookingForAJob:"ProfileInfo_lookingForAJob__eXd3+",profilePhoto:"ProfileInfo_profilePhoto__XFo7Q",imageUploadWrapper:"ProfileInfo_imageUploadWrapper__08W6k",imageUploadInput:"ProfileInfo_imageUploadInput__6Z68v",imageUploadLabel:"ProfileInfo_imageUploadLabel__o9BDE"},U=s(7437),C=s(2422),J={statusInput:"ProfileStatusWithHooks_statusInput__Q6OOM"},O=function(e){var o=(0,l.useState)(!1),s=(0,M.Z)(o,2),t=s[0],i=s[1],r=(0,l.useState)(e.status),n=(0,M.Z)(r,2),a=n[0],c=n[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,I.jsxs)("div",{className:J.statusWrapper,children:[!t&&(0,I.jsx)("div",{children:(0,I.jsx)("span",{onDoubleClick:function(){e.isOwner&&i(!0)},children:e.status||"-"})}),t&&(0,I.jsx)("div",{children:(0,I.jsx)("input",{className:J.statusInput,onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.updateStatus(a)},value:a})})]})},L="Contact_contactLink__e56KC",R=function(e){var o=e.contactName,s=e.contactValue;return(0,I.jsxs)("div",{children:[(0,I.jsx)("b",{children:o}),":"," ",(0,I.jsx)("a",{className:L,href:s,rel:"noreferrer",target:"_blank",children:s})]})},W={form:"ProfileInfoDataForm_form__7iPrD",profileInfoDataFormButton:"ProfileInfoDataForm_profileInfoDataFormButton__qc8lO",lookingForAJob:"ProfileInfoDataForm_lookingForAJob__bHlGQ",error:"ProfileInfoDataForm_error__IhzTZ"},z=function(e){var o=A.Ry().shape({fullName:A.Z_().min(3,"Too Short!").max(25,"Too Long!").required("Required"),aboutMe:A.Z_().min(3,"Too Short!").max(35,"Too Long!").required("Required"),contacts:A.Ry({facebook:A.Z_().min(3,"Too Short!").required("Required"),website:A.Z_().min(3,"Too Short!").required("Required"),vk:A.Z_().min(3,"Too Short!").required("Required"),twitter:A.Z_().min(3,"Too Short!").required("Required"),instagram:A.Z_().min(3,"Too Short!").required("Required"),youtube:A.Z_().min(3,"Too Short!").required("Required"),github:A.Z_().min(3,"Too Short!").required("Required"),mainLink:A.Z_().min(3,"Too Short!").required("Required")})});return(0,I.jsx)(F.J9,{onSubmit:e.saveProfileInfoData,initialValues:(0,t.Z)({},e.profile),validationSchema:o,children:function(o){return(0,I.jsxs)(F.l0,{onSubmit:o.handleSubmit,className:W.form,autoComplete:"off",children:[o.status,(0,I.jsx)("div",{className:W.profileInfoDataFormButton,children:(0,N.a)(void 0,"Save","submit",{props:null})}),(0,I.jsxs)("div",{className:W.fullName,children:[(0,I.jsx)("b",{children:"Full name"}),": ",(0,Z.Gr)("input","fullName","Full name"),o.errors.fullName&&(0,I.jsx)("p",{className:W.error,children:o.errors.fullName})]}),(0,I.jsxs)("div",{className:W.aboutMe,children:[(0,I.jsx)("b",{children:"About me"}),": ",(0,Z.Gr)("input","aboutMe","About me"),o.errors.aboutMe&&(0,I.jsx)("p",{className:W.error,children:o.errors.aboutMe})]}),(0,I.jsxs)("div",{className:W.contacts,children:[(0,I.jsx)("b",{children:"Contacts"}),Object.keys(e.profile.contacts).map((function(e){var s,t;return(0,I.jsxs)("div",{children:[e,": ",(0,Z.Gr)("input","contacts."+e,e),(null===(s=o.errors.contacts)||void 0===s?void 0:s[e])&&(0,I.jsx)("p",{className:W.error,children:null===(t=o.errors.contacts)||void 0===t?void 0:t[e]})]},e)}))]}),(0,I.jsx)("div",{className:W.lookingForAJob,children:(0,I.jsx)("b",{children:(0,Z.Gr)("input","lookingForAJob",null,{type:"checkbox"},"Looking for a job right now")})}),(0,I.jsxs)("div",{className:W.lookingForAJobDescription,children:[(0,I.jsx)("b",{children:"Job description"}),":"," ",(0,Z.Gr)("input","lookingForAJobDescription","Describe the job you are looking for..."),(0,I.jsx)("p",{className:W.error,children:o.errors.lookingForAJobDescription})]})]})}})},G=function(e){return(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{className:q.profileInfoDataButton,children:e.isOwner&&(0,N.a)(void 0,"Edit profile","button",{onClick:e.switchOnEditMode})}),(0,I.jsxs)("div",{className:q.aboutMe,children:[(0,I.jsx)("b",{children:"About me"}),": ",e.profile.aboutMe]}),(0,I.jsxs)("div",{className:q.contacts,children:[(0,I.jsx)("b",{children:"Contacts"}),Object.keys(e.profile.contacts).map((function(o){return(0,I.jsx)(R,{contactName:o,contactValue:e.profile.contacts[o]},o)}))]}),(0,I.jsxs)("div",{className:q.lookingForAJob,children:[(0,I.jsx)("b",{children:"Looking for a job right now:"}),(0,I.jsx)("img",{src:!0===e.profile.lookingForAJob?U:C,alt:""})]}),e.profile.lookingForAJob&&(0,I.jsxs)("div",{className:q.lookingForAJobDescription,children:[(0,I.jsx)("b",{children:"Job description"}),": ",e.profile.lookingForAJobDescription]})]})},H=function(e){var o=(0,l.useState)(!1),s=(0,M.Z)(o,2),i=s[0],r=s[1];if(!e.profile)return(0,I.jsx)(T.Z,{});return(0,I.jsxs)("div",{className:q.descriptionBlock,children:[(0,I.jsxs)("div",{className:q.descriptionBlockAvatar,children:[(0,I.jsx)("div",{children:(0,I.jsx)("h2",{children:e.profile.fullName})}),(0,I.jsx)("img",{className:q.profilePhoto,src:e.profile.photos.large||w,alt:""}),e.isOwner&&(0,I.jsxs)("div",{className:q.imageUploadWrapper,children:[(0,I.jsx)("label",{className:q.imageUploadLabel,htmlFor:"imageUpload",children:"Change picture"}),(0,I.jsx)("input",{className:q.imageUploadInput,type:"file",name:"imageUpload",onChange:function(o){e.savePhoto(o.target.files[0]),o.target.files.length}})]}),e.isOwner&&(0,I.jsx)("div",{className:q.followers,children:(0,I.jsx)("p",{children:"followers: ".concat(e.followed.length)})})]}),(0,I.jsxs)("div",{className:q.descriptionBlockInfo,children:[(0,I.jsx)("div",{className:q.descriptionBlockStatus,children:(0,I.jsx)(O,{isOwner:e.isOwner,status:e.status,updateStatus:e.updateStatus})}),(0,I.jsx)("div",{className:q.descriptionBlockAbout,children:i?(0,I.jsx)(z,(0,t.Z)((0,t.Z)({},e),{},{saveProfileInfoData:function(o,s){e.saveData(o,s.setSubmitting,s.setStatus),s.setSubmitting(!0),r(!1)}})):(0,I.jsx)(G,(0,t.Z)((0,t.Z)({},e),{},{switchOnEditMode:function(){r(!0)}}))})]})]})},E="Profile_profile__HQwUi",X="Followed_followedWrapper__iB2wh",V="Followed_title__BvgM3",Q="Followed_followedList__jXe4K",$="Followed_user__LYSAX",K=s(6871),Y=function(e){var o=(0,K.s0)(),s=e.photo?e.photo:w;return(0,I.jsxs)("div",{className:$,onClick:function(){o("/profile/".concat(e.id),{replace:!0})},children:[(0,I.jsx)("div",{children:(0,I.jsx)("img",{src:s,width:"40px",alt:""})}),(0,I.jsx)("div",{children:e.name.length>10?e.name.substring(0,7)+"...":e.name})]})},ee=function(e){var o=e.followed.map((function(e){return(0,I.jsx)(Y,{name:e.name,photo:e.photo,id:e.id},e.id)}));return o.length=9,(0,I.jsxs)("div",{className:X,children:[(0,I.jsx)("div",{className:V,children:"I'm following them:"}),(0,I.jsx)("div",{className:Q,children:o})]})},oe=function(e){return(0,I.jsxs)("div",{className:E,children:[(0,I.jsx)(H,{saveData:e.saveData,isOwner:e.isOwner,savePhoto:e.savePhoto,profile:e.profile,status:e.status,updateStatus:e.updateStatus,followed:e.followed}),e.isOwner&&(0,I.jsx)(ee,{followed:e.followed}),e.isOwner&&(0,I.jsx)(B,{})]})},se=s(9625),te=s(7781),ie=s(5841),re=function(e){(0,n.Z)(s,e);var o=(0,a.Z)(s);function s(){return(0,i.Z)(this,s),o.apply(this,arguments)}return(0,r.Z)(s,[{key:"refreshProfile",value:function(){var e;null!==this.props.match&&(e=this.props.match.params.userId||this.props.authorizedUserId),e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){e.match!==this.props.match&&this.refreshProfile()}},{key:"render",value:function(){return(0,I.jsx)(oe,(0,t.Z)((0,t.Z)({},this.props),{},{saveData:this.props.saveData,isOwner:!this.props.match,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,followed:this.props.followed}))}}]),s}(l.Component),ne=(0,te.qC)((0,c.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserId:e.auth.userId,followed:e.profilePage.followed}}),{getUserProfile:u.et,getUserStatus:u.Tq,updateStatus:u.Nf,savePhoto:u.Ju,saveData:u.OH}),ie.W,se.e)(re)},2422:function(e,o,s){e.exports=s.p+"static/media/symbol_no.463407a87d2defb65cce.png"},7437:function(e,o,s){e.exports=s.p+"static/media/symbol_yes.d39139e3013efddfb742.png"}}]);
//# sourceMappingURL=833.2dddd356.chunk.js.map